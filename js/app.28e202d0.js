(function(t){function e(e){for(var a,o,r=e[0],i=e[1],l=e[2],u=0,h=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);d&&d(e);while(h.length)h.shift()();return c.push.apply(c,l||[]),s()}function s(){for(var t,e=0;e<c.length;e++){for(var s=c[e],a=!0,r=1;r<s.length;r++){var i=s[r];0!==n[i]&&(a=!1)}a&&(c.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},c=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=i;c.push([1,"chunk-vendors"]),s()})({0:function(t,e){},"034f":function(t,e,s){"use strict";var a=s("85ec"),n=s.n(a);n.a},"043a":function(t,e,s){"use strict";var a=s("764a"),n=s.n(a);n.a},"0cec":function(t,e,s){"use strict";var a=s("d588"),n=s.n(a);n.a},"0f7d":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-wrapper row",class:[t.message.received?"start-xs":"end-xs"]},[s("div",{staticClass:"message",class:[t.message.received?"received":"sent"]},[t._v(" "+t._s(t.message.content)+" ")])])},n=[],c={props:["message"]},o=c,r=(s("043a"),s("2877")),i=Object(r["a"])(o,a,n,!1,null,"ca8f651a",null);e["default"]=i.exports},1:function(t,e,s){t.exports=s("56d7")},"107c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"user-wrapper row middle-xs"},[t.$store.state.selectedChat?s("div",{staticClass:"col-xs"},[t._v(" "+t._s(t.$store.state.contacts[t.$store.state.selectedChat].name)+" ")]):t._e()]),s("div",{staticClass:"messages-wrapper"},[t.$store.state.selectedChat?s("messages",{attrs:{chat:t.$store.state.chats[t.$store.state.selectedChat]}}):t._e()],1),s("div",{staticClass:"input-wrapper row middle-xs"},[s("div",{staticClass:"col-xs"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"input-field",attrs:{type:"text"},domProps:{value:t.message},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)},input:function(e){e.target.composing||(t.message=e.target.value)}}})])])])},n=[],c=s("ced0"),o={data(){return{message:""}},methods:{sendMessage(){this.$http.post(this.$store.state.apiURL+"sendMessage",{}).then(t=>{console.log(t.body)},t=>{console.log(t)}),this.$store.state.chats[this.$store.state.selectedChat].push({received:!1,content:this.message}),Object(c["b"])("chats",this.$store.state.chats).then(()=>{let t=document.getElementById("messages");t.scrollTop=t.scrollHeight}),this.message=""}}},r=o,i=(s("9db1"),s("2877")),l=Object(i["a"])(r,a,n,!1,null,"558c0ed1",null);e["default"]=l.exports},1662:function(t,e,s){},"184d":function(t,e,s){"use strict";var a=s("e301"),n=s.n(a);n.a},2:function(t,e){},"284c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"messages",attrs:{id:"messages"}},t._l(t.chat,(function(t){return s("message",{attrs:{message:t}})})),1)},n=[],c={props:["chat"]},o=c,r=(s("0cec"),s("2877")),i=Object(r["a"])(o,a,n,!1,null,"408691ae",null);e["default"]=i.exports},3:function(t,e){},4:function(t,e){},"46a8":function(t,e,s){"use strict";var a=s("1662"),n=s.n(a);n.a},5:function(t,e){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},c=[],o=s("ced0"),r={data(){return{credentials:{},refreshToken:null,accessToken:null}},created(){this.getStoredData()},methods:{getStoredData(){Object(o["a"])("chats").then(t=>{void 0===t?(console.log("stored chats not found..."),Object(o["b"])("chats",{}).then(()=>{console.log("empty chats list created.")})):this.$store.state.chats=t}),Object(o["a"])("contacts").then(t=>{void 0===t?(console.log("stored contacts not found..."),Object(o["b"])("contacts",{}).then(()=>{console.log("empty contacts list created.")})):this.$store.state.contacts=t}),Object(o["a"])("credentials").then(t=>{void 0===t?(console.log("stored credentials not found..."),this.generateCredentials()):this.$store.state.credentials=t})},generateCredentials(){let t=s("4487"),e=s("5c1a");e.prime.generateProbablePrime(1024,(e,s)=>{this.credentials={id:t.generate(150),password:t.generate(30),secret:s.toString()},console.log(this.credentials),Object(o["b"])("credentials",this.credentials).then(()=>{console.log("new credentials generated."),this.$store.state.credentials=this.credentials})})},testDH(){let t="133536470678429729982890921262497746529610075498529201302181779419494793420154504185871784032120181747515869580607501446865539228140028697128937031015333393713772007414993331355551826965993353943834302867067538923672352083289290439130824980497504780137298992304094950529785180565145845238951175151854196308959",e="95830488627750745001334794437944443602729752008349176794695811277850906964699317524245338690578315681398954488228531568834908823260407790373533019110503144712862882110254673403630388886471025496254756166536850843102389719346888395867859689229454790401834976363536373634168281054040880961571694543580066392561",s=this.dh("3",t,this.$store.state.publicMod);console.log("pubA: "+s);let a=this.dh("3",e,this.$store.state.publicMod);console.log("pubB: "+a);let n=this.dh(a,t,this.$store.state.publicMod);console.log("shaA: "+n);let c=this.dh(s,e,this.$store.state.publicMod);console.log("shaB: "+c)},dh(t,e,a){let n=s("7409"),c=n(t),o=n(e),r=n(a);return c.modPow(o,r).toString()}}},i=r,l=(s("034f"),s("2877")),d=Object(l["a"])(i,n,c,!1,null,null,null),u=d.exports,h=s("8c4f"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-2"},[s("chats")],1),s("div",{staticClass:"col-xs-8 borders"},[s("conversation")],1),s("div",{staticClass:"col-xs-2"},[t.$store.state.addContactVisible?s("add-contact"):t._e()],1)])])},f=[],v={},m=v,g=(s("184d"),Object(l["a"])(m,p,f,!1,null,"4d8e598f",null)),b=g.exports;a["a"].use(h["a"]);const C=[{path:"/",name:"frontpage",component:b}],_=new h["a"]({mode:"history",base:"/",routes:C});var x=_,y=s("2f62");a["a"].use(y["a"]);var $=new y["a"].Store({state:{addContactVisible:!1,selectedChat:null,contacts:{},chats:{},credentials:{},apiURL:"https://glacial-chamber-87753.herokuapp.com/api/",publicMod:"112457129983317064494133258034491756790943511028023366901014968560410379195027"}}),w=s("28dd"),O=(s("05cc"),s("660e"));a["a"].use(w["a"]),a["a"].use(O["a"],{breakpoints:{sm:768,lg:1/0}}),a["a"].filter("date",(function(t){if(!t)return"";let e=["January","February","March","April","May","June","July","August","September","October","November","December"],s=t.toString().split(" ")[0].replace(/-/g,"/"),a=new Date(s);return e[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()})),a["a"].config.productionTip=!1;const j=s("6ae9");j.keys().forEach(t=>{a["a"].component(t.split("/").pop().split(".")[0],j(t).default||j(t))}),new a["a"]({router:x,store:$,render:function(t){return t(u)}}).$mount("#app")},6:function(t,e){},"6ae9":function(t,e,s){var a={"./AddContact.vue":"8fd0","./Chat.vue":"e6b0","./Chats.vue":"ac11","./Conversation.vue":"107c","./Message.vue":"0f7d","./Messages.vue":"284c"};function n(t){var e=c(t);return s(e)}function c(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=c,t.exports=n,n.id="6ae9"},"764a":function(t,e,s){},"7f57":function(t,e,s){"use strict";var a=s("d0a1"),n=s.n(a);n.a},"85ec":function(t,e,s){},"8fd0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"add-contact"},[s("div",{staticClass:"close row middle-xs",on:{click:t.hideWindow}},[s("div",{staticClass:"col-xs start-xs"},[t._v(" Close ")]),s("div",{staticClass:"col-xs end-xs"},[t._v(" X ")])]),s("div",{staticStyle:{margin:"10px"}},[t._v(" Contact Name ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.contactName,expression:"contactName"}],staticStyle:{margin:"10px"},attrs:{type:"text"},domProps:{value:t.contactName},on:{input:function(e){e.target.composing||(t.contactName=e.target.value)}}}),s("div",{staticStyle:{margin:"10px"}},[t._v(" Their code ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.contactCode,expression:"contactCode"}],staticStyle:{margin:"10px"},attrs:{type:"text"},domProps:{value:t.contactCode},on:{input:function(e){e.target.composing||(t.contactCode=e.target.value)}}}),s("div",{staticStyle:{margin:"10px"}},[t._v(" Your code ")]),s("span",{staticStyle:{margin:"10px"}},[t._v(t._s(t.personalCode))]),s("div",{staticStyle:{margin:"10px"}},[s("button",{on:{click:t.addContact}},[t._v("Add Contact")])])])},n=[],c=s("ced0"),o={data(){return{contactName:"",contactCode:"",personalCode:this.$store.state.credentials.id+"_"+this.generatePublic()}},methods:{hideWindow(){this.$store.state.addContactVisible=!1},addContact(){if(0==this.contactName.length)return;if(!this.contactCode.includes("_"))return;let t=this.contactCode.split("_")[0],e=this.generateShared(this.contactCode.split("_")[1]),s={name:this.contactName,key:e};this.$set(this.$store.state.contacts,t,s),this.$set(this.$store.state.chats,t,[]),Object(c["b"])("contacts",this.$store.state.contacts).then(()=>{console.log("contact created..."),Object(c["b"])("chats",this.$store.state.chats).then(()=>{console.log("chat created.")})}),this.hideWindow()},generatePublic(){return this.dh("3",this.$store.state.credentials.secret,this.$store.state.publicMod)},generateShared(t){return this.dh(t,this.$store.state.credentials.secret,this.$store.state.publicMod)},dh(t,e,a){let n=s("7409"),c=n(t),o=n(e),r=n(a);return c.modPow(o,r).toString()}}},r=o,i=(s("46a8"),s("2877")),l=Object(i["a"])(r,a,n,!1,null,"c12ad82c",null);e["default"]=l.exports},9587:function(t,e,s){"use strict";var a=s("c391"),n=s.n(a);n.a},"9db1":function(t,e,s){"use strict";var a=s("e3f9"),n=s.n(a);n.a},ac11:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chats"},[s("div",{staticClass:"add-contact row middle-xs",on:{click:t.showWindow}},[s("div",{staticClass:"col-xs start-xs"},[t._v(" Add Contact ")]),s("div",{staticClass:"col-xs end-xs"},[t._v(" + ")])]),s("div",{staticClass:"chat-items"},t._l(t.$store.state.contacts,(function(t,e){return s("chat",{attrs:{contact:e}})})),1)])},n=[],c={data(){return{}},methods:{showWindow(){this.$store.state.addContactVisible=!0}}},o=c,r=(s("7f57"),s("2877")),i=Object(r["a"])(o,a,n,!1,null,"24668957",null);e["default"]=i.exports},c391:function(t,e,s){},d0a1:function(t,e,s){},d588:function(t,e,s){},e301:function(t,e,s){},e3f9:function(t,e,s){},e6b0:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-item row middle-xs",on:{click:t.selectChat}},[s("div",{staticClass:"user col-xs-12"},[t._v(" "+t._s(t.$store.state.contacts[t.contact].name)+" ")]),s("div",{staticClass:"last-message col-xs-12"},[t._v(" id="+t._s(t.contact)+" key="+t._s(t.$store.state.contacts[t.contact].key)+" ")])])},n=[],c={props:["contact"],methods:{selectChat(){this.$store.state.selectedChat=this.contact}}},o=c,r=(s("9587"),s("2877")),i=Object(r["a"])(o,a,n,!1,null,"41978c72",null);e["default"]=i.exports}});
//# sourceMappingURL=app.28e202d0.js.map